{% extends "base.html" %}

{% block content %}
<div class="hero">
    <div class="names-container">
        <div class="names-left">
            <span>Peggy</span>
            <span>Evan</span>
        </div>
        <span class="ampersand">&</span>
        <div class="names-right">
            <span>雪娟</span>
            <span>艾文</span>
        </div>
    </div>
    <div class="info-box">
        <p class="date">{{ details.date_short }}</p>
        <p class="venue">{{ details.venue }}</p>
        <p class="venue">{{ details.city }}</p>
    </div>
</div>

<section id="rsvp">
    <h2>RSVP</h2>
    <form class="rsvp-form" action="{{ url_for('rsvp') }}" method="POST">
        <div class="form-group">
            <label for="name">Your Name</label>
            <input type="text" id="name" name="name" required>
        </div>

        <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" required>
        </div>

        <div class="form-group">
            <label>Will you be attending?</label>
            <div class="radio-group">
                <label>
                    <input type="radio" name="attending" value="yes" required onchange="toggleGuestCount(true)">
                    Joyfully Accept
                </label>
                <label>
                    <input type="radio" name="attending" value="no" required onchange="toggleGuestCount(false)">
                    Regretfully Decline
                </label>
            </div>
        </div>

        <div class="form-group guest-count-group" id="guestCountGroup">
            <label for="guest_count">Number of Guests (including yourself)</label>
            <input type="number" id="guest_count" name="guest_count" min="1" max="10" value="1">
        </div>

        <div class="form-group guest-count-group" id="dietaryGroup">
            <label for="dietary_restrictions">Dietary Restrictions</label>
            <input type="text" id="dietary_restrictions" name="dietary_restrictions" placeholder="e.g., vegetarian, gluten-free, allergies">
        </div>

        <div class="form-group">
            <label for="message">Who will be joining you? (optional)</label>
            <textarea id="message" name="message" rows="3" placeholder="Please list the names of anyone attending with you (e.g., spouse, partner, children)"></textarea>
        </div>

        <button type="submit" class="submit-btn">Send RSVP</button>
    </form>
</section>

<section id="gallery">
    <div class="gallery-grid">
        {% for photo in photos %}
        <div class="gallery-item" onclick="openLightbox('{{ url_for('serve_medium', filename=photo) }}')">
            <img src="{{ url_for('serve_thumbnail', filename=photo) }}" alt="Photo" loading="lazy">
        </div>
        {% endfor %}
    </div>
</section>

<div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <span class="lightbox-close">&times;</span>
    <img id="lightbox-img" src="" alt="Full size photo">
</div>

<section id="schedule">
    <h2>Schedule</h2>
    <div class="schedule-days">
        <div class="schedule-day">
            <div class="schedule-day-header">Friday</div>
            <div class="schedule-day-content">
                <p class="schedule-tbd">Rehearsal Dinner TBD</p>
            </div>
        </div>
        <div class="schedule-day schedule-day-main">
            <div class="schedule-day-header">Saturday</div>
            <div class="schedule-day-content">
                <div class="schedule-event">
                    <span class="schedule-time">2:30 PM</span>
                    <span class="schedule-desc">Wedding Party & Family Photos</span>
                </div>
                <div class="schedule-event">
                    <span class="schedule-time">4:00 PM</span>
                    <span class="schedule-desc">Ceremony</span>
                </div>
                <div class="schedule-event">
                    <span class="schedule-time">4:30 PM</span>
                    <span class="schedule-desc">Cocktail Hour</span>
                </div>
                <div class="schedule-event">
                    <span class="schedule-time">5:30 PM</span>
                    <span class="schedule-desc">Reception / Dinner</span>
                </div>
                <div class="schedule-event">
                    <span class="schedule-time">All Night</span>
                    <span class="schedule-desc">&#10024; Dancing &#10024;</span>
                </div>
            </div>
        </div>
        <div class="schedule-day">
            <div class="schedule-day-header">Sunday</div>
            <div class="schedule-day-content">
                <p class="schedule-sunday-title">Sunday Funday</p>
                <img src="{{ url_for('serve_directions', filename='lake.jpg') }}" alt="Lake activities" class="schedule-lake-img">
                <p class="schedule-sunday-text">Hang out all day at the lake: kayak, paddle board, fish, jet-ski, swim, wake-board, water-ski, tube, boat, bbq</p>
            </div>
        </div>
    </div>
</section>

<section id="accommodations">
    <h2>Accommodations</h2>
    <div class="accommodation-card">
        <img src="{{ url_for('static', filename='inn.jpg') }}" alt="Budget Host Inn" class="accommodation-img">
        <div class="accommodation-info">
            <h3>Budget Host Inn</h3>
            <p class="accommodation-address">1580 Lincoln Rd, Allegan, MI 49010</p>
            <p class="accommodation-phone">269-673-6622</p>
            <a href="https://www.budgethost.com/hotels/Budget_Host_Sunset_Motel_Allegan_MI.aspx" target="_blank" class="accommodation-link">Book Your Stay</a>
        </div>
    </div>
</section>

<section id="travel">
    <h2>Travel</h2>
    <p class="travel-text">Allegan MI is not the closest place to major airports. We can help coordinate rides from Chicago IL to Allegan MI to help with the travel. Text Evan or Peggy for help!</p>
    <p class="travel-text">Also, consider bringing a swimsuit just in case!</p>

    <div class="directions-container">
        <h3 class="directions-heading">Directions to the Venue</h3>
        <div class="directions-cards">
            <a href="https://www.google.com/maps/dir/?api=1&origin=Chicago+Midway+International+Airport,+Chicago,+IL&destination=4091+Wildwood+Drive,+Allegan,+MI&travelmode=driving" target="_blank" class="directions-card">
                <img src="{{ url_for('serve_directions', filename='Midway2Allegan.png') }}" alt="Directions from Chicago Midway Airport to Allegan" class="directions-img">
                <div class="directions-label">Chicago Midway Airport (MDW)</div>
            </a>
            <a href="https://www.google.com/maps/dir/?api=1&origin=O%27Hare+International+Airport,+Chicago,+IL&destination=4091+Wildwood+Drive,+Allegan,+MI&travelmode=driving" target="_blank" class="directions-card">
                <img src="{{ url_for('serve_directions', filename='OHare2Allegan.png') }}" alt="Directions from O'Hare International Airport to Allegan" class="directions-img">
                <div class="directions-label">O'Hare International Airport (ORD)</div>
            </a>
            <a href="https://www.google.com/maps/dir/?api=1&origin=Gerald+R.+Ford+International+Airport,+Grand+Rapids,+MI&destination=4091+Wildwood+Drive,+Allegan,+MI&travelmode=driving" target="_blank" class="directions-card">
                <img src="{{ url_for('serve_directions', filename='GFord2Allegan.png') }}" alt="Directions from Gerald R. Ford Airport to Allegan" class="directions-img">
                <div class="directions-label">Gerald R. Ford Airport (GRR)</div>
            </a>
        </div>
    </div>
</section>

<footer class="site-footer">
    <img src="{{ url_for('static', filename='cat_no_bg.png') }}" alt="Cat" class="footer-cat">
    <a href="{{ url_for('view_rsvps') }}" class="admin-link">Admin</a>
</footer>

<script>
function toggleGuestCount(show) {
    document.getElementById('guestCountGroup').classList.toggle('visible', show);
    document.getElementById('dietaryGroup').classList.toggle('visible', show);
}

function openLightbox(src) {
    document.getElementById('lightbox-img').src = src;
    document.getElementById('lightbox').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeLightbox() {
    document.getElementById('lightbox').classList.remove('active');
    document.body.style.overflow = '';
}

document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') closeLightbox();
});
</script>
{% endblock %}
